!function(e,$){"use strict";var t=0,i=$("head"),n=e.BigText,s=$.fn.bigtext,r={DEBUG_MODE:!1,DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",noConflict:function(t){return t&&($.fn.bigtext=s,e.BigText=n),r},supports:{wholeNumberFontSizeOnly:function(){if(!("getComputedStyle"in e))return!0;var t=$("<div/>").css({position:"absolute","font-size":"14.1px"}).insertBefore($("script").eq(0)),i=e.getComputedStyle(t[0],null),n=i&&"14px"===i.getPropertyValue("font-size");return t.remove(),n}()},init:function(){$("#"+r.GLOBAL_STYLE_ID).length||i.append(r.generateStyleTag(r.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; } .bigtext > * { display: block; }",".bigtext ."+r.EXEMPT_CLASS+", .bigtext ."+r.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(t,i){var n;$(e).off(t).on(t,function(){n&&clearTimeout(n),n=setTimeout(i,100)})},getStyleId:function(e){return r.STYLE_ID+"-"+e},generateStyleTag:function(e,t){return $("<style>"+t.join("\n")+"</style>").attr("id",e)},clearCss:function(e){var t=r.getStyleId(e);$("#"+t).remove()},generateCss:function(e,t,i,n){var s=[];r.clearCss(e);for(var o=0,a=t.length;o<a;o++)s.push("#"+e+" ."+r.LINE_CLASS_PREFIX+o+" {"+(n[o]?" white-space: normal;":"")+(t[o]?" font-size: "+t[o]+"px;":"")+(i[o]?" word-spacing: "+i[o]+"px;":"")+"}");return r.generateStyleTag(r.getStyleId(e),s)},jQueryMethod:function(e){return r.init(),e=$.extend({minfontsize:r.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:r.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},e||{}),this.each(function(){var n=$(this).addClass("bigtext"),s=n.width(),o=n.attr("id"),a=e.childSelector?n.find(e.childSelector):n.children();o||(o="bigtext-id"+t++,n.attr("id",o)),e.resize&&r.bindResize("resize.bigtext-event-"+o,function(){r.jQueryMethod.call($("#"+o),e)}),r.clearCss(o),a.addClass(function(e,t){return[t.replace(new RegExp("\\b"+r.LINE_CLASS_PREFIX+"\\d+\\b"),""),r.LINE_CLASS_PREFIX+e].join(" ")});var c=r.calculateSizes(n,a,s,e.maxfontsize,e.minfontsize);i.append(r.generateCss(o,c.fontSizes,c.wordSpacings,c.minFontSizes))}),this.trigger("bigtext:complete")},testLineDimensions:function(e,t,i,n,s,r,o){var a;if(o="number"==typeof o?o:0,e.css(i,n+r),(a=e.width())>=t){if(e.css(i,""),a===t)return{match:"exact",size:parseFloat((parseFloat(n)-.1).toFixed(3))};var c=t-o,l=a-t;return{match:"estimate",size:parseFloat((parseFloat(n)-("word-spacing"===i&&o&&l<c?0:s)).toFixed(3))}}return a},calculateSizes:function(e,t,i,n,s){var o=e.clone(!0).addClass("bigtext-cloned").css({fontFamily:e.css("font-family"),textTransform:e.css("text-transform"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),position:"absolute",left:r.DEBUG_MODE?0:-9999,top:r.DEBUG_MODE?0:-9999}).appendTo(document.body),a=[],c=[],l=[],u=[];return t.css("float","left").each(function(){var e=$(this),t=r.supports.wholeNumberFontSizeOnly?[8,4,1]:[8,4,1,.1],o,c;if(e.hasClass(r.EXEMPT_CLASS))return a.push(null),u.push(null),void l.push(!1);var p=32,f=parseFloat(e.css("font-size")),d=(e.width()/f).toFixed(6);c=parseInt(i/d,10)-32;e:for(var g=0,S=t.length;g<S;g++)t:for(var h=1,_=10;h<=_;h++){if(c+h*t[g]>n){c=n;break e}if("number"!=typeof(o=r.testLineDimensions(e,i,"font-size",c+h*t[g],t[g],"px",o))){if(c=o.size,"exact"===o.match)break e;break t}}u.push(i/c),c>n?(a.push(n),l.push(!1)):s&&c<s?(a.push(s),l.push(!0)):(a.push(c),l.push(!1))}).each(function(e){var t=$(this),n=0,s=1,o;if(t.hasClass(r.EXEMPT_CLASS))return void c.push(null);t.css("font-size",a[e]+"px");for(var l=1,u=3;l<3;l+=1)if("number"!=typeof(o=r.testLineDimensions(t,i,"word-spacing",l,1,"px",o))){n=o.size;break}t.css("font-size",""),c.push(n)}).removeAttr("style"),r.DEBUG_MODE?o.css({"background-color":"rgba(255,255,255,.4)"}):o.remove(),{fontSizes:a,wordSpacings:c,ratios:u,minFontSizes:l}}};$.fn.bigtext=r.jQueryMethod,e.BigText=r}(this,jQuery);